<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Tab icon -->
    <link rel="shortcut icon" href="{{ url_for('static', filename='icons/favicon.png') }}" type="image/x-icon">
    <!-- Importing tailwind css -->
    <script src="{{ url_for('static', filename='tailwind@4.js') }}"></script>
    <title>Personal Task Manager</title>
</head>

<body>
    <div class="max-w-4xl mx-auto sm:mt-8 p-4 bg-gray-100 rounded">
        <h2 class='mt-3 text-2xl font-bold text-center uppercase'>Personal Task Manager</h2>
        <h5
            class='mb-6 text-sm text-center uppercase'
            style="font-family: 'comic sans ms';"
        >
            A Todo App with Session Management Feature
        </h5>

        <form class="flex items-center mb-4" action="{{url_for('add_todo')}}" method="POST">
            
            <input name="todo" class="flex-grow p-2 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500"
                type="text" placeholder="Add Todo" required />
            <button class="ml-4 p-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none">
                
                <!-- Plus icon -->
                <img src="{{url_for('static', filename='icons/plus.svg') }}" />

            </button>
            
        </form>

        <div class="flex flex-col sm:flex-row items-center justify-between gap-4">

            <!-- <FilterButtons /> -->
            <form class="flex space-x-4 items-center" action="/" method="GET">
                <select class="text-sm px-2 py-1 rounded border border-gray-300 focus:outline-none" name="filter"
                    required>
                    <option value="">Select Filter</option>
                    <option value="default">All</option>
                    <option value="completed">Completed</option>
                    <option value="incomplete">Incomplete</option>
                </select>

                <button class="text-sm px-2 py-1 bg-purple-500 text-white rounded ml-2">
                    Go
                </button>
            </form>

        </div>

        <!-- <TodoList /> -->
        <ul id="todoList">

            <li class="my-2 text-sm italic">All Your Notes Here...</li>

            {% for i in range(todo_list_length) %}
            <li class="flex flex-col sm:flex-row sm:items-center justify-between border-b-2 py-2 gap-4">

                <form class="flex items-center" action="{{ url_for('edit_todo') }}" method="POST">
                    <span class="mr-4 text-gray-500">{{ i+1 }}.</span>

                    {% if todo_list[i]["in_edit_mode"] %}

                    <input type="hidden" name="index" value="{{ i }}" />
                    <input type="text" class="border-b-2 border-gray-300 focus:outline-none focus:border-blue-500"
                        name="value" value="{{ todo_list[i]['name'] }}" autofocus />

                    {% else %}
                    {% if todo_list[i]["completed"] %}
                    <span class="mr-4 line-through text-gray-500">
                        {{ todo_list[i]['name'] }}
                    </span>
                    {% else %}
                    <span class="mr-4">
                        {{ todo_list[i]['name'] }}
                    </span>
                    {% endif %}

                    {% endif %}
                    <!-- )} -->
                </form>

                {% if not todo_list[i]['in_edit_mode'] %}
                <div class="flex space-x-3 ml-8">
                    <form action="{{url_for('start_edit_todo')}}" method="POST">
                        <button class="mr-2 text-sm bg-blue-500 text-white sm:px-2 px-1 py-1 rounded" name="index"
                            value="{{ i }}">

                            <!-- Edit icon -->
                            <img src="{{ url_for('static', filename='icons/edit.svg') }}" />

                        </button>
                    </form>

                    <form action="{{url_for('delete_todo')}}" method="POST">
                        
                        <button class="mr-2 text-sm bg-red-500 text-white sm:px-2 px-1 py-1 rounded" name="index"
                            value="{{ i }}">
                            
                            <!-- Tash icon -->
                            <img src="{{ url_for('static', filename='icons/trash.svg') }}" />

                        </button>
                        
                    </form>

                    
                    <form action="{{url_for('update_completion')}}" method="POST">
                        
                        {% if todo_list[i]["completed"] %}
                        <button class="text-sm bg-yellow-500 text-white sm:px-2 px-1 py-1 rounded" name="index"
                            value="{{i}}">

                            <!-- Cross icon -->
                            <img src="{{ url_for('static', filename='icons/cross.svg') }}" />

                        </button>
                        {% else %}
                        <button class="text-sm bg-green-500 text-white sm:px-2 px-1 py-1 rounded" name="index"
                            value="{{i}}">
    
                            <!-- Check icon -->
                            <img src="{{ url_for('static', filename='icons/check.svg') }}" />
    
                        </button>
                        {% endif %}
                        
                    </form>
                    
                </div>
                
                {% endif %}
                
            </li>
            {% endfor %}
        </ul>
    </div>
</body>

</html>